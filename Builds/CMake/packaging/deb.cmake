set(CPACK_GENERATOR "DEB")
set(CPACK_DEBIAN_PACKAGE_HOMEPAGE "http://github.com/seelabs/xbridge_witness")
set(CPACK_DEBIAN_PACKAGE_RECOMMENDS "rippled")
set(CPACK_DEBIAN_PACKAGE_DEBUG ON)
set(CPACK_SYSTEM_NAME "amd64")
set(CPACK_DEBIAN_DEBUGINFO_PACKAGE ON)
set(CPACK_DEBIAN_PACKAGE_ARCHITECTURE ${CPACK_SYSTEM_NAME})
set(CPACK_DEBIAN_PACKAGE_RELEASE 1)
set(RIPPLED_VERSION ${CPACK_PACKAGE_VERSION})
message("CPACK_PACKAGE_VERSION: ${CPACK_PACKAGE_VERSION}")
string(REPLACE "-" ";" VERSION_LIST ${CPACK_PACKAGE_VERSION})
message("VERSION_LIST: ${VERSION_LIST}")
list(GET VERSION_LIST 0 CPACK_PACKAGE_VERSION)
list (LENGTH VERSION_LIST _len)

if (${_len} GREATER 1)
    list(GET VERSION_LIST 1 PRE_VERSION)
    message("PRE_VERSION: ${PRE_VERSION}")
    set(CPACK_DEBIAN_PACKAGE_VERSION "${CPACK_PACKAGE_VERSION}~${PRE_VERSION}")
else()
    set(CPACK_DEBIAN_PACKAGE_VERSION "${CPACK_PACKAGE_VERSION}")
endif()
set(CPACK_PACKAGE_FILE_NAME "${CMAKE_PROJECT_NAME}_${CPACK_DEBIAN_PACKAGE_VERSION}-${CPACK_DEBIAN_PACKAGE_RELEASE}_${CPACK_SYSTEM_NAME}")
